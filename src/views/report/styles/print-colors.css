/* 全局打印背景颜色保留样式 */
/* 在所有报告组件中引入此文件即可 */

@media print {
  /* 通用保留背景色类 */
  .print-keep-colors,
  .fa-report-page,
  .ll1-report-page,
  .lr0-report-page,
  .slr1-report-page,
  .fa-step3-detailed-report,
  .fa-step5-detailed-report,
  .fa-table-report,
  .fa-canvas-report,
  .ll1-step2-report,
  .ll1-step3-report,
  .ll1-step4-report,
  .lr0-step2-report,
  .lr0-step3-report,
  .lr0-step4-report,
  .lr0-step5-report,
  .slr1-step2-report,
  .slr1-step3-report,
  .slr1-step4-report,
  .slr1-step5-report,
  .ai-report-section,
  .report-error-list,
  .report-progress-card {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* 所有子元素也保留背景色 */
  .print-keep-colors *,
  .fa-report-page *,
  .ll1-report-page *,
  .lr0-report-page *,
  .slr1-report-page *,
  .fa-step3-detailed-report *,
  .fa-step5-detailed-report *,
  .fa-table-report *,
  .fa-canvas-report *,
  .ll1-step2-report *,
  .ll1-step3-report *,
  .ll1-step4-report *,
  .lr0-step2-report *,
  .lr0-step3-report *,
  .lr0-step4-report *,
  .lr0-step5-report *,
  .slr1-step2-report *,
  .slr1-step3-report *,
  .slr1-step4-report *,
  .slr1-step5-report *,
  .ai-report-section *,
  .report-error-list *,
  .report-progress-card * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* 打印时强制双列布局（用于绘图对比） */
  .fa-canvas-report .grid,
  .fa-canvas-report :deep(.grid) {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 0.75rem !important;
  }

  /* 确保绘图容器在打印时不被截断 */
  .fa-canvas-report .grid > div,
  .fa-canvas-report :deep(.grid > div) {
    break-inside: avoid !important;
    page-break-inside: avoid !important;
  }

  /* 调整绘图容器样式，提高空间利用率 */
  .fa-canvas-report .graph-container,
  .fa-canvas-report :deep(.graph-container) {
    min-height: 150px !important;
    padding: 0.25rem !important;
    width: 100% !important;
  }

  /* 学生信息打印优化 - 防止换行 */
  .student-info-grid,
  .student-info :deep(.student-info-grid) {
    display: flex !important;
    flex-wrap: nowrap !important;
    justify-content: center !important;
    gap: 40px !important;
  }

  .student-info-item,
  .student-info :deep(.student-info-item) {
    display: flex !important;
    align-items: center !important;
    white-space: nowrap !important;
    flex-shrink: 0 !important;
  }

  .student-info-label,
  .student-info :deep(.student-info-label) {
    white-space: nowrap !important;
    margin-right: 8px !important;
  }

  .student-info-value,
  .student-info :deep(.student-info-value) {
    white-space: nowrap !important;
  }

  /* SVG 图表最大化利用空间 */
  .fa-canvas-report :deep(.rendered-svg-container),
  .fa-canvas-report :deep(.viz-wrapper) {
    width: 100% !important;
    height: 100% !important;
  }

  .fa-canvas-report :deep(.rendered-svg-container svg) {
    width: 100% !important;
    height: auto !important;
    max-height: 280px !important;
    object-fit: contain !important;
  }
}
